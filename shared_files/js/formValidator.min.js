!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.FormValidator=t()}("undefined"!=typeof window?window:this,function(){return class e{static version="2.0.0";constructor(e="",t={}){if(this.form=document.getElementById(e),!this.form)throw Error(`Form with id "${e}" not found.`);this.fullName=this.form.querySelector("#fullName")||!1,this.firstName=this.form.querySelector("#firstName")||!1,this.lastName=this.form.querySelector("#lastName")||!1,this.email=this.form.querySelector("#email")||!1,this.phoneNumber=this.form.querySelector("#phoneNumber")||!1,"iti"in t&&"object"==typeof t.iti&&0!==Object.keys(t.iti).length||(console.warn(`iti "${t.iti}" not found in options. Using default iti options.`),t.iti=this.getDefaultItiOptions()),this.events={validationSuccess:[],validationError:[]},this.setupPhoneNumberInput(t.iti),this.language=t.language?t.language.toLowerCase():"en",this.messages=t.messages||this.getDefaultMessages(),this.messages[this.language]||(console.warn(`Language "${this.language}" not found in messages. Using default messages.`),this.language="en",this.messages=this.getDefaultMessages()),this.generateErrorMessages(),this.form.addEventListener("submit",this.validateForm.bind(this)),this.form.addEventListener("input",this.handleInput.bind(this))}on(e,t){"function"==typeof t&&this.events[e]&&this.events[e].push(t)}notifySubscribers(e,t){this.events[e]&&this.events[e].forEach(e=>{e(t)})}generateErrorMessages(){["fullName","firstName","lastName","email","phoneNumber",].forEach(e=>{if(this[e]){let t=document.createElement("div");t.id=`${e}Error`,t.classList.add("field-error"),this[e].insertAdjacentElement("afterend",t)}})}getDefaultMessages(){return{en:{fullNameError:"The full name must contain a minimum of two words",firstNameError:"First name should be at least 2 characters long",lastNameError:"Last name should be at least 2 characters long",emailError:"Enter a valid email address",phoneNumberError:"Enter a valid phone number"}}}getDefaultItiOptions(){return{initialCountry:"auto",hiddenInput:"fullPhone",geoIpLookup(e){fetch("https://ipapi.co/json").then(e=>e.json()).then(t=>e(t.country_code)).catch(()=>e("us"))},utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"}}setupPhoneNumberInput(e){this.phoneNumber?(this.addScript("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"),this.addStylesheet("https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css"),setTimeout(()=>{this.iti=window.intlTelInput(this.phoneNumber,e)},500)):console.warn(`Phone number input: ${this.phoneNumber}`)}addStylesheet(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}addScript(e){let t=document.createElement("script");t.src=e,document.head.appendChild(t)}toggleInputClass(e,t){e.classList.remove(t?"error":"done"),e.classList.add(t?"done":"error")}updateErrorText(e,t,i){e.textContent=t?"":this.messages[this.language][`${i}Error`]}validateField(e,t){let i=this[e],s=this.form.querySelector(`#${e}Error`);if(i||s){let a=i.value.trim(),l=t(a);return this.toggleInputClass(i,l),this.updateErrorText(s,l,e),l}}validateFullName(){let e=this.fullName.value.split(/\s+/);return e.length>=2}validateName(e){return e.length>=2}validateEmail(){let e=this.email.checkValidity(),t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email.value);return e&&t}validatePhoneNumber(){return this.iti.isValidNumber()}validateForm(e){e.preventDefault(),this.validationResult={};let t=["fullName","firstName","lastName","email","phoneNumber",].every(e=>{let t="email"===e?this.validateEmail.bind(this):"phoneNumber"===e?this.validatePhoneNumber.bind(this):"fullName"===e?this.validateFullName.bind(this):this.validateName.bind(this);return this[e]?this.validationResult[e]=this.validateField(e,t):(console.warn(`Field "${e}" not found.`),this.validationResult[e]=!0),this.validationResult[e]});if(t)console.log("The form has been successfully validated."),this.notifySubscribers("validationSuccess",this.form);else throw this.notifySubscribers("validationError",this.validationResult),Error("Form validation failed.")}handleInput(e){let t=e.target;if("INPUT"===t.tagName){let i=t.id,s="email"===i?this.validateEmail.bind(this):"phoneNumber"===i?this.validatePhoneNumber.bind(this):"fullName"===i?this.validateFullName.bind(this):this.validateName.bind(this);this.validateField(i,s)}}}});